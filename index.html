<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Commerce Website</title>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f5f5f5;
      color: #222;
    }
    header {
      background: #004080;
      color: white;
      text-align: center;
      padding: 1rem;
    }
    main {
      display: flex;
      justify-content: space-between;
      padding: 1rem;
    }
    .products {
      flex: 2;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1rem;
    }
    .product {
      background: white;
      border: 1px solid #ccc;
      padding: 0.5rem;
      text-align: center;
      border-radius: 8px;
      transition: transform 0.2s;
    }
    .product:hover { transform: scale(1.03); }
    .product img {
      max-width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 6px;
    }
    .cart {
      flex: 1;
      background: #fff;
      padding: 1rem;
      border-radius: 8px;
    }
    .builder {
      margin: 1rem;
      padding: 1rem;
      background: #e8f4ff;
      border-radius: 8px;
    }
    footer {
      background: #004080;
      color: white;
      text-align: center;
      padding: 1rem;
      margin-top: 1rem;
    }
    button {
      background: #004080;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 5px;
    }
    button:hover { background: #003060; }
    h2 i { margin-right: 6px; color: #004080; }
  </style>
</head>
<body>
  <header>
    <h1><i class="fa-solid fa-store"></i> E-Commerce Website</h1>
    <p>Using Creational Design Patterns</p>
  </header>

  <main>
    <!-- Products Section -->
    <section class="products">
      <h2><i class="fa-solid fa-box"></i> Products</h2>
      <div id="product-list" class="grid"></div>
      <button onclick="seedProducts()"><i class="fa-solid fa-plus"></i> Load Products</button>
    </section>

    <!-- Cart Section -->
    <aside class="cart">
      <h2><i class="fa-solid fa-cart-shopping"></i> Cart</h2>
      <div id="cart-items"></div>
      <p><strong>Total: </strong><span id="total">0</span> ₹</p>
      <button onclick="checkout()"><i class="fa-solid fa-credit-card"></i> Checkout</button>
    </aside>
  </main>

  <!-- Laptop Builder -->
  <section class="builder">
    <h2><i class="fa-solid fa-laptop"></i> Custom Laptop Builder (Builder Pattern)</h2>
    <label>CPU:
      <select id="cpu">
        <option>i5</option>
        <option>i7</option>
        <option>Ryzen 5</option>
        <option>Ryzen 7</option>
      </select>
    </label>
    <label>RAM:
      <select id="ram">
        <option>8GB</option>
        <option selected>16GB</option>
        <option>32GB</option>
      </select>
    </label>
    <label>Storage:
      <select id="storage">
        <option>512GB SSD</option>
        <option>1TB SSD</option>
      </select>
    </label>
    <button onclick="buildLaptop()"><i class="fa-solid fa-microchip"></i> Build Laptop</button>
  </section>

  <footer>
    <p><i class="fa-solid fa-lightbulb"></i> Singleton | Factory Method | Abstract Factory | Builder | Prototype</p>
  </footer>

  <script>
    // ---------- Singleton (Cart) ----------
    const Cart = (function () {
      let instance;
      function createInstance() { return { items: [] }; }
      return {
        getInstance: function () {
          if (!instance) instance = createInstance();
          return instance;
        }
      };
    })();
    const cart = Cart.getInstance();

    // ---------- Factory + Prototype ----------
    class Product {
      constructor(type, name, price, image) {
        this.type = type;
        this.name = name;
        this.price = price;
        this.image = image;
      }
      clone() {
        return new Product(this.type, this.name + " (Clone)", this.price, this.image);
      }
    }

    const ProductFactory = {
      create: (type, name, price, image) => new Product(type, name, price, image)
    };

    // ---------- Abstract Factory ----------
    const ShippingFactory = {
      create: (method) => {
        if (method === "standard") return { name: "Standard Shipping", fee: 50 };
        if (method === "express") return { name: "Express Shipping", fee: 150 };
        return { name: "Free Shipping", fee: 0 };
      }
    };

    // ---------- Builder ----------
    class LaptopBuilder {
      constructor() {
        this.cpu = "i5";
        this.ram = "16GB";
        this.storage = "512GB SSD";
      }
      setCPU(cpu) { this.cpu = cpu; return this; }
      setRAM(ram) { this.ram = ram; return this; }
      setStorage(storage) { this.storage = storage; return this; }
      build() {
        return new Product("Electronics",
          `Custom Laptop ${this.cpu}/${this.ram}/${this.storage}`,
          60000,
          "images/laptop.jpg");
      }
    }

    // ---------- Products ----------
    let products = [];
    function seedProducts() {
      products = [
        ProductFactory.create("Electronics", "Phone", 15000, "images/phone.jpg"),
        ProductFactory.create("Clothing", "T-Shirt", 500, "images/tshirt.jpg"),
        ProductFactory.create("Books", "JavaScript Guide", 300, "images/book.jpg"),
        ProductFactory.create("Electronics", "Headphones", 2000, "images/headphones.jpg")
      ];
      renderProducts();
    }

    function renderProducts() {
      const list = document.getElementById("product-list");
      list.innerHTML = "";
      products.forEach((p, i) => {
        list.innerHTML += `
          <div class="product">
            <img src="${p.image}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p><i class="fa-solid fa-tag"></i> ${p.type}</p>
            <p><i class="fa-solid fa-indian-rupee-sign"></i> ${p.price}</p>
            <button onclick="addToCart(${i})"><i class="fa-solid fa-cart-plus"></i> Add</button>
            <button onclick="cloneProduct(${i})"><i class="fa-solid fa-clone"></i> Clone</button>
          </div>
        `;
      });
    }

    // ---------- Cart ----------
    function addToCart(i) {
      cart.items.push(products[i]);
      renderCart();
    }

    function cloneProduct(i) {
      products.push(products[i].clone());
      renderProducts();
    }

    function renderCart() {
      const cartDiv = document.getElementById("cart-items");
      cartDiv.innerHTML = "";
      let total = 0;
      cart.items.forEach(item => {
        total += item.price;
        cartDiv.innerHTML += `<p><i class="fa-solid fa-box-open"></i> ${item.name} - ₹${item.price}</p>`;
      });
      document.getElementById("total").textContent = total;
    }

    function checkout() {
      if (cart.items.length === 0) return alert("Cart is empty!");
      const shipping = ShippingFactory.create("standard");
      alert(
        `Order placed!\nItems: ${cart.items.length}\nShipping: ${shipping.name}\nTotal: ₹${document.getElementById("total").textContent}`
      );
      cart.items = [];
      renderCart();
    }

    // ---------- Laptop Builder ----------
    function buildLaptop() {
      const builder = new LaptopBuilder()
        .setCPU(document.getElementById("cpu").value)
        .setRAM(document.getElementById("ram").value)
        .setStorage(document.getElementById("storage").value);

      const laptop = builder.build();
      products.push(laptop);
      renderProducts();
    }
  </script>
</body>
</html>
